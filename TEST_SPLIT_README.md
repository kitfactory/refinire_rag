# Test Split Runner - ãƒ†ã‚¹ãƒˆåˆ†å‰²å®Ÿè¡Œãƒ„ãƒ¼ãƒ«

å¤§é‡ã®ãƒ†ã‚¹ãƒˆã‚’ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆãªã—ã§å®Ÿè¡Œã—ã€ã‚«ãƒãƒ¬ãƒƒã‚¸ã¨çµæœã‚’é›†è¨ˆã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### å…¨ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œï¼ˆæ¨å¥¨ï¼‰
```bash
python run_all_tests.py
```

ã“ã‚Œã ã‘ã§å…¨ãƒ†ã‚¹ãƒˆãŒæœ€é©ãªè¨­å®šã§å®Ÿè¡Œã•ã‚Œã€çµæœãŒ `test_results/` ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚

## æ©Ÿèƒ½

- âœ… ãƒ†ã‚¹ãƒˆã‚’æŒ‡å®šã‚µã‚¤ã‚ºã®ãƒãƒ£ãƒ³ã‚¯ã«è‡ªå‹•åˆ†å‰²
- âœ… å„ãƒãƒ£ãƒ³ã‚¯ã‚’ç‹¬ç«‹ã—ã¦å®Ÿè¡Œï¼ˆã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå¯¾å¿œï¼‰
- âœ… ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ‡ãƒ¼ã‚¿ã®é›†è¨ˆ
- âœ… ãƒ†ã‚¹ãƒˆçµæœã®çµ±åˆï¼ˆæˆåŠŸ/å¤±æ•—/ã‚¹ã‚­ãƒƒãƒ—/ã‚¨ãƒ©ãƒ¼æ•°ï¼‰
- âœ… å®Ÿè¡Œæ™‚é–“ã®è¨ˆæ¸¬ã¨åˆ†æ
- âœ… è©³ç´°ãªãƒ¬ãƒãƒ¼ãƒˆå‡ºåŠ›ï¼ˆJSON + ãƒ†ã‚­ã‚¹ãƒˆï¼‰
- âœ… å¤±æ•—ã—ãŸãƒ†ã‚¹ãƒˆã®ä¸€è¦§è¡¨ç¤º

## åŸºæœ¬çš„ãªä½¿ç”¨æ–¹æ³•

### å…¨ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
```bash
python run_tests_split.py
```

### ç‰¹å®šã®ãƒ†ã‚¹ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å®Ÿè¡Œ
```bash
python run_tests_split.py --pattern tests/unit/
```

### å°ã•ãªãƒãƒ£ãƒ³ã‚¯ã‚µã‚¤ã‚ºã§å®Ÿè¡Œï¼ˆã‚ˆã‚Šç´°ã‹ãåˆ†å‰²ï¼‰
```bash
python run_tests_split.py --chunk-size 20
```

### ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ™‚é–“ã‚’å»¶é•·
```bash
python run_tests_split.py --timeout 600
```

## é«˜åº¦ãªä½¿ç”¨ä¾‹

### çµ±åˆãƒ†ã‚¹ãƒˆã®ã¿ã‚’å®Ÿè¡Œ
```bash
python run_tests_split.py --pattern tests/integration/
```

### ç‰¹å®šã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œ
```bash
python run_tests_split.py --pattern tests/test_document_pipeline_comprehensive.py
```

### å¤§ããªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç”¨ã®è¨­å®š
```bash
python run_tests_split.py --chunk-size 30 --timeout 900 --results-dir large_test_results
```

## å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«

å®Ÿè¡Œå¾Œã€`test_results/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆã¾ãŸã¯æŒ‡å®šã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼‰ã«ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã¾ã™ï¼š

- `aggregated_results.json` - è©³ç´°ãªå®Ÿè¡Œçµæœï¼ˆJSONå½¢å¼ï¼‰
- `test_summary.txt` - äººé–“ãŒèª­ã¿ã‚„ã™ã„æ¦‚è¦ãƒ¬ãƒãƒ¼ãƒˆ
- `coverage_chunk_*.xml` - å„ãƒãƒ£ãƒ³ã‚¯ã®ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ‡ãƒ¼ã‚¿
- `intermediate_results_*.json` - ä¸­é–“çµæœï¼ˆé•·æ™‚é–“å®Ÿè¡Œæ™‚ã®ä¿é™ºï¼‰

## ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼è©³ç´°

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|------------|-----------|------|
| `--pattern` | `tests/` | å®Ÿè¡Œã™ã‚‹ãƒ†ã‚¹ãƒˆã®ãƒ‘ã‚¿ãƒ¼ãƒ³ |
| `--chunk-size` | `50` | 1ãƒãƒ£ãƒ³ã‚¯ã‚ãŸã‚Šã®æœ€å¤§ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«æ•° |
| `--timeout` | `300` | 1ãƒãƒ£ãƒ³ã‚¯ã‚ãŸã‚Šã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼ˆç§’ï¼‰ |
| `--results-dir` | `test_results` | çµæœã‚’ä¿å­˜ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª |

## æ¨å¥¨è¨­å®š

### é€šå¸¸ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
```bash
python run_tests_split.py --chunk-size 50 --timeout 300
```

### å¤§è¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
```bash
python run_tests_split.py --chunk-size 30 --timeout 600
```

### CI/CDç’°å¢ƒ
```bash
python run_tests_split.py --chunk-size 25 --timeout 180
```

### é‡ã„ãƒ†ã‚¹ãƒˆãŒã‚ã‚‹å ´åˆ
```bash
python run_tests_split.py --chunk-size 20 --timeout 900
```

## å‡ºåŠ›ä¾‹

```
=== Running test chunk 1 (50 files) ===
Chunk 1: 45 passed, 2 failed, 3 skipped, 0 errors
Execution time: 125.34s

=== Running test chunk 2 (50 files) ===
Chunk 2: 48 passed, 0 failed, 2 skipped, 0 errors
Execution time: 98.76s

============================================================
TEST EXECUTION SUMMARY
============================================================
Total chunks executed: 33
Total execution time: 3247.82s
Average time per chunk: 98.42s

Test Results:
  Passed:  1523 (92.9%)
  Failed:    45 (2.7%)
  Skipped:   71 (4.3%)
  Errors:     0 (0.0%)
  Total:   1639

Coverage: 21.4%

Overall Status: ğŸŸ¡ MOSTLY SUCCESSFUL
============================================================
```

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒ¡ãƒ¢ãƒªã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å ´åˆ
ãƒãƒ£ãƒ³ã‚¯ã‚µã‚¤ã‚ºã‚’å°ã•ãã—ã¦ãã ã•ã„ï¼š
```bash
python run_tests_split.py --chunk-size 20
```

### ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆãŒé »ç™ºã™ã‚‹å ´åˆ
ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ™‚é–“ã‚’å»¶é•·ã—ã¦ãã ã•ã„ï¼š
```bash
python run_tests_split.py --timeout 600
```

### ã‚«ãƒãƒ¬ãƒƒã‚¸ãŒè¨ˆç®—ã•ã‚Œãªã„å ´åˆ
`pytest-cov`ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„ï¼š
```bash
uv add pytest-cov
```

## çµ‚äº†ã‚³ãƒ¼ãƒ‰

- `0`: ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆãŒæˆåŠŸ
- `1`: å¤±æ•—ã¾ãŸã¯ã‚¨ãƒ©ãƒ¼ã®ãƒ†ã‚¹ãƒˆãŒå­˜åœ¨
- `130`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚ˆã‚‹ä¸­æ–­ï¼ˆCtrl+Cï¼‰

## æ³¨æ„äº‹é …

- å„ãƒãƒ£ãƒ³ã‚¯ã¯ç‹¬ç«‹ã—ã¦å®Ÿè¡Œã•ã‚Œã‚‹ãŸã‚ã€ãƒ†ã‚¹ãƒˆé–“ã®ä¾å­˜é–¢ä¿‚ãŒã‚ã‚‹å ´åˆã¯æ³¨æ„ãŒå¿…è¦ã§ã™
- ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ‡ãƒ¼ã‚¿ã¯å„ãƒãƒ£ãƒ³ã‚¯ã§å€‹åˆ¥ã«åé›†ã•ã‚Œã€æœ€å¾Œã«é›†è¨ˆã•ã‚Œã¾ã™
- ä¸­æ–­ã•ã‚ŒãŸå ´åˆã€ä¸­é–“çµæœãŒä¿å­˜ã•ã‚Œã¦ã„ã‚‹ãŸã‚éƒ¨åˆ†çš„ãªåˆ†æãŒå¯èƒ½ã§ã™